---
title: "ピクチャ機能入門！ ゲームに便利情報を表示してみよう"
date: "2025-01-20T00:00:00+09:00"
category: "コラム"
description: "2024年に WWA Wing の不安定版に含まれたピクチャ機能では、ゲーム上に任意のグラフィックを表示させることができます。この記事はピクチャ機能を活用できるようになろう！ という入門記事第1弾です。"
---

2024年に WWA Wing の不安定版に含まれたピクチャ機能では、ゲーム上に任意のグラフィックを表示させることができます。

WWA Contest 2024 では上位作品を中心にピクチャ機能を活用していて、ゲームステータスの表示やイベント演出、メニュー表示などはこのピクチャ機能で支えられています。

この記事はピクチャ機能を活用できるようになろう！ という入門記事第1弾です。

最初から WWA を作るよりも、既存の WWA を改造したほうが分かりやすいので、今回は WWA マップ作成ツールに付属している WWA マップ「ケーブダンジョン1」 (caves01) を改造した形で進めます。

## 不安定版のダウンロード

WWA Script もそうですが、ピクチャ機能は不安定版にのみ搭載している機能です。

WWA Wing の公式サイトから、不安定版の完全版をダウンロードしてください。

[WWA Wing](https://wwawing.com/)

ダウンロードした不安定版は、普段制作に使用しているWWAのファイルとは別の場所に展開することをおすすめします。

```
|- WWA
|  |- WinWwamk.exe
|  `- mapdata
|     |- basicgame.dat <- 普段制作しているWWAゲーム
|     |- basicgame.gif
|     |- basicgame.html
|     |- cover.gif
|     |- style.css <- WWA Wing (安定版)
|     |- wwa.css <- WWA Wing (安定版)
|     |- wwa.js <- WWA Wing (安定版)
|     `- wwa-server.exe
|- WWA_unstable
|  |- WinWwamk.exe
|  `- mapdata
|     |- script
|     |  |- defined.js
|     |  |- index.js
|     |  `- script_file_list.json
|     |- caves01.dat <- 今回改造するケーブダンジョン1
|     |- caves01.gif
|     |- caves01.html
|     |- cover.gif
|     |- style.css <- WWA Wing (不安定版)
|     |- wwa.css <- WWA Wing (不安定版)
|     |- wwa.js <- WWA Wing (不安定版)
|     `- wwa-server.exe
```

作成ツールや wwa-server は同じものが含まれているので、ファイル操作に慣れている方は以下のような構成でもいいでしょう。

```
|- WWA
|  |- WinWwamk.exe
|  `- mapdata
|     |- unstable
|     |  |- script <- これも必要です！
|     |  |  |- defined.js
|     |  |  |- index.js
|     |  |  `- script_file_list.json
|     |  |- caves01.dat <- 今回改造するケーブダンジョン1
|     |  |- caves01.gif
|     |  |- caves01.html <- ここはダウンロードした不安定版から取り出してください
|     |  |- cover.gif
|     |  |- style.css <- WWA Wing (不安定版)
|     |  |- wwa.css <- WWA Wing (不安定版)
|     |  `- wwa.js <- WWA Wing (不安定版)
|     |- basicgame.dat
|     |- basicgame.gif
|     |- basicgame.html
|     |- cover.gif
|     |- style.css <- WWA Wing (安定版)
|     |- wwa.css <- WWA Wing (安定版)
|     |- wwa.js <- WWA Wing (安定版)
|     `- wwa-server.exe
```

## 準備したほうがいいもの

ピクチャ機能は WWA Script を使用しなくてもマクロ文で実行することは可能ですが、以下の理由からこの入門記事では WWA Script を使用して説明します。

- 不安定版で WWA Script が組み込まれている
- WWA Script が絶賛開発中であり、今後不具合が起きたときの修正対応がしやすい

WWA Script については以下の入門記事を読んでおくとすんなり進められるかもしれません。

[WWA Script入門：コピペ可、サンプル配布あり！色々やってみよう｜アルクス](https://note.com/wwarcus/n/nb9900d21c64b)

## モンスターを倒すと落とす玉から攻撃力や防御力のアップを可視化しよう

モンスターを倒すと、攻撃力を上げる赤い玉、あるいは防御力を上げる青い玉が手に入ります。

はじめてプレイする人は、赤い玉あるいは青い玉を拾うと何が上がるのか分からないかもしれません。

物体パーツ32番の青い玉のメッセージを追加します。

```jsx
<script>
PICTURE(1, { pos: [20, 20], img: [5, 2], time: 500 });
```

![ソースコードを追加した物体パーツ32番](./wwawing_picture_beginner-show_grow_status-1.png)

それぞれ解説します。

- `<script>`
    - WWA Script を使用しますよーと示すテキストです
- `PICTURE(...);`
    - これからピクチャを表示しますよーと命令する文です
- `PICTURE(1, { ... });` の `1`
    - レイヤー番号を指定します。詳細は後述します。
- `pos: [20, 20],`
    - そのピクチャは、左上から縦20ピクセル、横20ピクセルに表示しますよーと示す文です
- `img: [5, 2],`
    - そのピクチャの画像は、 WWA イメージ画像で言う左上から横6マス目、縦3マス目、つまり盾の画像を使用しますよーと示す文です
    - ・・・何だよ、横6マス目、縦3マス目じゃないのかよと思うかもしれませんが、 WWA イメージ画像の指定は、0から数えるルールとなっているので、そのような表記になっています

    ![ケーブダンジョン1のイメージ画像で盾のイメージを特定する方法](./caves01_image_coord.png)

- `time: 500`
    - ピクチャは表示されてから0.5秒後には消えますよーと示す文です

**それでも分からん！** ようであれば、お申し付けください。

試しに拾ってみると、左上に盾のマークが表示されると思います。同じように物体パーツ33番の赤い玉にもメッセージを追加してみましょう。

![左上に盾が表示されるケーブダンジョン1の画面](./wwawing_picture_beginner-show_grow_status-2.png)

```jsx
<script>
PICTURE(1, { pos: [20, 20], img: [4, 2], time: 500 });
```

![ソースコードを追加した物体パーツ32番](./wwawing_picture_beginner-show_grow_status-3.png)

ケーブダンジョン1では、他にも青い玉2つと赤い玉2つ、青いクリスタル、赤いクリスタルもあるので、これも同じように対応しましょう。

![それぞれソースコードを追加した6つの物体パーツ](./wwawing_picture_beginner-show_grow_status-4.png)

・・・青い玉2つと赤い玉2つ（物体パーツ36番）はどうするかって？ それは後ほど説明します。

今回の一例は多分誰もが知っているケーブダンジョンですが、自作グラフィックで作るダンジョン WWA だと話は違います。

説明部屋を飛ばして遊んだり、説明部屋を読んでもいまいち頭に入らなかったりする人にとっては分かりやすいことかもしれません。

### 番外編: プレイヤーの座標に表示させてみよう

画面左上に固定で表示されるのが気になりませんか？ プレイヤーの真上に表示したいですか？

・・・できます！

例えば物体パーツ32番の青い玉の場合。少し長いな～となった時は要所要所に改行を入れておくと見やすくなります。

```jsx
<script>
PICTURE(1, {
  pos: [PLAYER_PX, PLAYER_PY - 40],
  img: [5, 2],
  time: 500
});
```

もし動かない場合、 **v4.1.0-unstable.based-on.3.12.11.p.22** 以降でお確かめください。

- `PLAYER_PX` は画面以上にいるプレイヤーのX座標を、 `PLAYER_PY` は同じY座標を表示することができます
- `- 40` が無いとプレイヤーと重なって表示されてしまうため、 Y 座標を引いて上隣に表示させています

![プレイヤーの近くに上がったステータスアイコンが表示されるケーブダンジョン1の画面](./wwawing_picture_beginner-how_to_show_icon_near_player.png)

試しに動かしてみると、少しずれた場所に表示されますが、一応仕様という事にしておいてください。

サンプルでは物体パーツ34番（青い玉2つ）に書いております。

### 番外編: img プロパティの指定がむず過ぎて無理な人へ

前述の通り、 `img` プロパティは WWA イメージ画像内の座標を指定する必要がありますが、これを特定するには画像を開いて左上から0から順番の数えるか、画像編集ツールで座標を特定して40で割るか、どちらかの作業が発生します。

ケーブダンジョンのような小規模作品ならまだ前者の方法で何とかなりますが、中規模作品以降になるとこの方法では大変なので後者・・・となりますが、結構難しい手順を踏むので簡単にはできません。

やり方は異なりますが、物体パーツ35番（赤い玉2つ）の場合、こんな方法もあります。

1. あらかじめ物体パーツ100番にパーツを作成。イメージ画像を剣として、以下のメッセージとする
    
    ```jsx
    { pos: [20, 20], time: 500 }
    ```
    
2. 物体パーツ32番を以下の通りに変更する
    
    ```jsx
    <script>
    PICTURE_FROM_PARTS(1, 100);
    ```

すでに `img` プロパティを書いている場合は、以下の手順に書き換えることになります。

- `PICTURE(〇, △);` の △ の部分を別パーツに展開
    - イメージ画像はパーツのグラフィックに指定
    - その際に `img: [5, 2]` にあたる部分を消去
- `PICTURE(〇, △);` の `PICTURE` は `PICTURE_FROM_PARTS` に変更
    - △ の部分は先ほど展開したパーツの番号に書き換える

サンプルでは物体パーツ35番（赤い玉2つ）に書いております。

## 攻撃力と防御力両方アップを可視化しよう

物体パーツ36番の場合、攻撃力も防御力もアップします。剣と盾を両方表示したいですよね？ 以下のようなイメージで表示してみるとします。

![盾の上に剣が重なっているイメージ](./wwawing_picture_beginner-layer_icon_image.png)

```jsx
<script>
PICTURE(1, { pos: [20, 20], img: [4, 2], time: 500 });
PICTURE(1, { pos: [20, 20], img: [5, 2], time: 500 });
```

![剣と盾を同時に表示するつもりが盾だけしか表示されないケーブダンジョン1の画面](./wwawing_picture_beginner-show_layer_status-1.png)

・・・盾しか表示されませんか？ はい。 `PICTURE(1, { ... });` の `1` が同じ数字の場合、最後に書いたピクチャが優先して表示されます。この数字を変えましょう。

```jsx
<script>
PICTURE(1, { pos: [20, 20], img: [4, 2], time: 500 });
PICTURE(2, { pos: [20, 20], img: [5, 2], time: 500 });
```

![剣と盾を同時に表示するつもりが盾が前に表示されているケーブダンジョン1の画面](./wwawing_picture_beginner-show_layer_status-2.png)

・・・ちょっと違いますね。1 と 2 を前後しましょう。

```jsx
<script>
PICTURE(2, { pos: [20, 20], img: [4, 2], time: 500 });
PICTURE(1, { pos: [20, 20], img: [5, 2], time: 500 });
```

![剣と盾を同時に表示されているケーブダンジョン1の画面](./wwawing_picture_beginner-show_layer_status-3.png)

![ソースコードを追加した物体パーツ36番](./wwawing_picture_beginner-show_layer_status-4.png)
*最終的にはこうなります*

うまく表示されました。この数字のことをレイヤー番号と言います。

レイヤー番号が大きいほど優先して前に表示されます。

![ピクチャ機能のレイヤーの仕組み](./wwawing_picture_about_layer_system.png)

ピクチャを重ねて表示したい場合、このレイヤー番号は意識する必要があります。
